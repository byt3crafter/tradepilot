<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-B5TZBTQXQK"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-B5TZBTQXQK');
  </script>

  <title>JTradePilot</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap"
    rel="stylesheet">

  <!-- Favicon Configuration -->
  <link rel="icon" href="/favicon.png" type="image/png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon.png">
  <link rel="shortcut icon" href="/favicon.png" type="image/png">

  <!-- UnicornStudio Animated Background - Landing Page Only (Loaded by React) -->


  <!-- Add Charting Libraries -->
  <script src="https://unpkg.com/d3@7.8.5/dist/d3.min.js"></script>
</head>

<body class="font-sans text-primary antialiased selection:bg-zinc-800 selection:text-white bg-[#08090A]">

  <!-- Animated Background Container - Created dynamically by React on landing page -->
  <div id="animated-background-container"></div>

  <div id="root"></div>

  <script>
    window.APP_CONFIG = (function () {
      const isLocal = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';

      let apiUrl;

      if (isLocal) {
        // In development (localhost), API is on the same machine but different port
        apiUrl = 'http://localhost:8080';
      } else {
        // In production, API is on the same domain
        apiUrl = window.location.origin;
      }

      console.log('[JTradePilot] API URL configured for:', apiUrl);
      console.log('[JTradePilot] Frontend running on:', window.location.origin);

      return {
        API_URL: apiUrl
      };
    })();



    // Global function to control animated background visibility
    window.showAnimatedBackground = function (isVisible) {
      const container = document.getElementById('animated-background-container');
      const isLowPerf = localStorage.getItem('lowPerformanceMode') === 'true';

      if (container) {
        if (isVisible && !isLowPerf) {
          container.style.display = 'block';
        } else {
          container.style.display = 'none';
        }
      }
    };

    // Check current route immediately (before React loads)
    function initializeBackgroundForCurrentRoute() {
      const path = window.location.pathname;
      const isLandingPage = path === '/';
      window.showAnimatedBackground(isLandingPage);
    }

    // Initialize on page load
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initializeBackgroundForCurrentRoute);
    } else {
      initializeBackgroundForCurrentRoute();
    }
  </script>

  <script type="module" src="/index.tsx"></script>
</body>

</html>